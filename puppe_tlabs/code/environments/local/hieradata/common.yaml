#
# This file is laid out similarly as the client request would go
#
# hosts file
hosts::host_entries:
  'localadmin.apigx.com':
    ip: '127.0.0.1'
  'local.apigx.com':
    ip: '127.0.0.1'
  'local.secure.apigx.com':
    ip: '127.0.0.1'
  'local.selyourgold.com':
    ip: '127.0.0.1'
  'local.thingswebuy.com':
    ip: '127.0.0.1'
  'local.recycleplatinum.com':
    ip: '127.0.0.1'
  'local.goldkit.com':
    ip: '127.0.0.1'
  'local.outofyourlife.com':
    ip: '127.0.0.1'
  'local.elitediamondbuyers.com':
    ip: '127.0.0.1'
  'local.beyond.com':
    ip: '127.0.0.1'
# Incoming request on 443 (SSL) -- Hits ELB (443:80) -> Varnish Cache (80:8081) -> Nginx (Cname Resolution) (8081:80) -> ELB (80:80) -> Web Heads (80)
# Incoming request on 80 (Non-SSL - Redirect to SSL) -- Hits ELB (80:8080) -> Nginx (Redirect to 443) ^
## Varnish Section

## Nginx Section (Redirector and Backend CNAME resolution box - needs two ports)
## Varnish Section (needs a port)
## Nginx Section (port 80 Backend Web Head)
#nginx::config::sendfile: 'off'
nginx::nginx_upstreams:
  'php_fpm':
    ensure: present
    members:
      - 'unix:/var/run/php-fpm/php-fpm.sock'
## PHP-FPM Section
php::ensure: latest
php::manage_repos: true
php::fpm: true
php::composer: true
php::composer::auto_update: true
php::pear: true
php::phpunit: true
php::fpm::config::log_level: notice
php::fpm::config::user: nginx
php::fpm::config::group: nginx
php::fpm::pools:
  www:
    listen: '/var/run/php-fpm/php-fpm.sock'
    listen_owner: nginx
    listen_group: nginx
    env_value:
      APPLICATION_ENV: 'local'
      GX_BASE_URL: 'http://local.secure.apigx.com'
      EDB_DB_NAME: 'd7_edb'
      EDB_DB_USER: 'd7'
      EDB_DB_PASSWORD: 'drupal'
      EDB_DB_HOST: 'localhost'
      EDB_DB_DRIVER: 'mysql'
      EDB_MEMCACHED_HOST: 'localhost:11211'
      GK_DB_NAME: 'd7_gk'
      GK_DB_USER: 'd7'
      GK_DB_PASSWORD: 'drupal'
      GK_DB_HOST: 'localhost'
      GK_DB_DRIVER: 'mysql'
      GK_MEMCACHED_HOST: 'localhost:11211'
      OOYL_DB_NAME: 'd7_ooyl'
      OOYL_DB_USER: 'd7'
      OOYL_DB_PASSWORD: 'drupal'
      OOYL_DB_HOST: 'localhost'
      OOYL_DB_DRIVER: 'mysql'
      OOYL_MEMCACHED_HOST: 'localhost:11211'
      RP_DB_NAME: 'd7_rp'
      RP_DB_USER: 'd7'
      RP_DB_PASSWORD: 'drupal'
      RP_DB_HOST: 'localhost'
      RP_DB_DRIVER: 'mysql'
      RP_MEMCACHED_HOST: 'localhost:11211'
      SYG_DB_NAME: 'd7_syg'
      SYG_DB_USER: 'd7'
      SYG_DB_PASSWORD: 'drupal'
      SYG_DB_HOST: 'localhost'
      SYG_DB_DRIVER: 'mysql'
      SYG_MEMCACHED_HOST: 'localhost:11211'
      TWB_DB_NAME: 'd7_twb'
      TWB_DB_USER: 'd7'
      TWB_DB_PASSWORD: 'drupal'
      TWB_DB_HOST: 'localhost'
      TWB_DB_DRIVER: 'mysql'
      TWB_MEMCACHED_HOST: 'localhost:11211'
      B79_DB_NAME: 'd7_beyond79'
      B79_DB_USER: 'd7'
      B79_DB_PASSWORD: 'drupal'
      B79_DB_HOST: 'localhost'
      B79_DB_DRIVER: 'mysql'
      B79_MEMCACHED_HOST: 'localhost:11211'
      DB_USER: 'goldexchange'
      DB_USERNAME: 'goldexchange'
      DB_PASSWORD: 'g0ld13l0cks'
      DB_HOST: 'localhost'
      DB_NAME: 'goldexchange'
      DB_DATABASE: 'goldexchange'
      MEMCACHED_HOST: 'localhost:11211'
php::settings:
  Date\date.timezone: America/New_York
  PHP/variables_order: EGPCS
  PHP/auto_prepend_file: '/var/www/auto_prepend_file.php'
php::fpm::settings:
  PHP/memory_limit: 128M
  PHP/short_open_tag: 'On'
  PHP/auto_prepend_file: '/var/www/auto_prepend_file.php'
php::extensions:
  mysqlnd: {}
  mbstring: {}
  mcrypt: {}
  xml: {}
  soap: {}
  opcache: {}
  bcmath: {}
  gd: {}
  intl: {}
## MySQL Section

#NFS Section (does not apply to dev)